var DragSlider=function(t,i){this.options=t,this.element=i,this._init()};DragSlider.prototype={_curPos:0,_curSlide:null,_create:function(){},_init:function(){var t=this;console.log(t),t.option("drag-wrapper",$(this.element)),t.option("draggable",$(this.element).find(".drag-inner"));var i=(t.option("drag-wrapper"),t.option("draggable")),e=0;i.css({left:0}),i.find(".drag-item").each(function(){var t=$(this);e+=t.outerWidth(!0)}),i.css({width:e}),t.option("original-width",e),i.on("mousedown",function(t){var i=$(this).addClass("draggable"),e=i.offset().left,n=t.pageX;i.css("z-index",1e3).parents().on("mousemove",function(t){if(i.hasClass("draggable")){var o=parseInt(t.pageX),r=e+(o-n),d=i.find(".drag-item:first"),a=d.outerWidth(),s=i.find(".drag-item:last"),l=s.outerWidth();0-a>r?(r=0,n-=a,i.append(i.find(".drag-item:first"))):r>0&&(r-=l,n+=l,i.prepend(i.find(".drag-item:last"))),i.offset({left:r})}}),t.preventDefault()}),$(document).on("mouseup",function(){i.removeClass("draggable").parents().unbind("mousemove")})},_onSlide:function(t,i){var e=$(i.elem),n=e.find(".drag-item:first"),o=n.outerWidth(),r=parseInt(e.css("padding-left")),d=e.outerWidth();0-r-o>=t&&(e.css({"padding-left":r+o+"px",width:d+o}),e.append(n))},gotoSlide:function(t){var i=this,e=$(i.element),n=e.find(".drag-inner"),o=(e.find(".drag-inner .drag-item"),t-1),r=t?-1*n.find(".drag-item:eq("+o+")").offset().left+n.offset().left:0;i._onStart(),i._curSlide||(i._curSlide=n.animate({left:r},{step:function(t,e){i._onSlide(t,e)},duration:1e3,complete:function(){n.css("padding-left",""),n.css("left",""),n.css("width",n.data("width")),i._onStop(),i._curSlide=null}}))},option:function(t,i){if($.isPlainObject(t))this.options=$.extend(!0,this.options,t);else{if(t&&"undefined"==typeof i)return this.options[t];this.options[t]=i}return this},_onStart:function(){},_onStop:function(){},publicFunction:function(){},_privateFunction:function(){}},window.log=function(){log.history=log.history||[],log.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))},function(t){t.widget.bridge("DragSlider",DragSlider),t(".drag-slider").DragSlider({prevPos:0}),t(".j-slide-top").on("click",function(){t("#mainDrag").DragSlider("gotoSlide",10)}),t(".j-slide-bottom").on("click",function(){t("#otherDrag").DragSlider("gotoSlide",3)}),t(".j-slide-both").on("click",function(){t("#mainDrag").DragSlider("gotoSlide",5),t("#otherDrag").DragSlider("gotoSlide",3)}),t(".j-reset-both").on("click",function(){t("#mainDrag").DragSlider("gotoSlide",0),t("#otherDrag").DragSlider("gotoSlide",0)})}(jQuery);
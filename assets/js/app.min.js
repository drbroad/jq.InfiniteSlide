var DragSlider=function(i,t){this.options=i,this.element=t,this._init()};DragSlider.prototype={_curPos:0,_curSlide:null,_create:function(){},_init:function(){var i=this;i.option("drag-wrapper",$(this.element)),i.option("draggable",$(this.element).find(".drag-inner"));var t=(i.option("drag-wrapper"),i.option("draggable")),o=0;t.css({left:0}),t.find("img").each(function(){var i=$(this);o+=i.outerWidth()}),t.css({width:o}),i.option("original-width",o),t.on("mousedown",function(i){var t=$(this).addClass("draggable"),o=t.offset().left,n=i.pageX;t.css("z-index",1e3).parents().on("mousemove",function(i){if(t.hasClass("draggable")){var e=parseInt(i.pageX),r=o+(e-n),l=t.find("img:first"),s=l.outerWidth(),a=t.find("img:last"),d=a.outerWidth();0-s>r?(r=0,n-=s,t.append(t.find("img:first"))):r>0&&(r-=d,n+=d,t.prepend(t.find("img:last"))),t.offset({left:r})}}),i.preventDefault()}),$(document).on("mouseup",function(){t.removeClass("draggable").parents().unbind("mousemove")})},_onSlide:function(i,t){var o=$(t.elem),n=o.find("img:first"),e=n.outerWidth(),r=parseInt(o.css("padding-left")),l=o.outerWidth();0-r-e>=i&&(o.css({"padding-left":r+e+"px",width:l+e}),o.append(n))},gotoSlide:function(i){var t=this,o=$(t.element),n=o.find(".drag-inner"),e=(o.find(".drag-inner img"),i-1),r=i?-1*n.find("img:eq("+e+")").offset().left+n.offset().left:0;t._onStart(),t._curSlide||(t._curSlide=n.animate({left:r},{step:function(i,o){t._onSlide(i,o)},duration:1e3,complete:function(){n.css("padding-left",""),n.css("left",""),n.css("width",n.data("width")),t._onStop(),t._curSlide=null}}))},option:function(i,t){if($.isPlainObject(i))this.options=$.extend(!0,this.options,i);else{if(i&&"undefined"==typeof t)return this.options[i];this.options[i]=t}return this},_onStart:function(){console.log("start...")},_onStop:function(){console.log("stop...")},publicFunction:function(){console.log("public function")},_privateFunction:function(){console.log("private function")}},window.log=function(){log.history=log.history||[],log.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))},function(i){i.widget.bridge("DragSlider",DragSlider),i(".drag-slider").DragSlider({prevPos:0}),i(".j-slide-top").on("click",function(){i("#mainDrag").DragSlider("gotoSlide",10)}),i(".j-slide-bottom").on("click",function(){i("#otherDrag").DragSlider("gotoSlide",3)}),i(".j-slide-both").on("click",function(){i("#mainDrag").DragSlider("gotoSlide",5),i("#otherDrag").DragSlider("gotoSlide",3)}),i(".j-reset-both").on("click",function(){i("#mainDrag").DragSlider("gotoSlide",0),i("#otherDrag").DragSlider("gotoSlide",0)})}(jQuery);